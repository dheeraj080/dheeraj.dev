"use strict";(()=>{var e={};e.id=6811,e.ids=[6811],e.modules={3524:e=>{e.exports=require("@prisma/client")},1635:e=>{e.exports=require("dayjs")},4195:e=>{e.exports=require("dayjs/plugin/relativeTime")},9593:e=>{e.exports=require("jsonata")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9926:e=>{e.exports=import("zod")},3733:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{config:()=>u,default:()=>l,routeModule:()=>c});var r=a(3e3),n=a(4761),o=a(3273),i=a(8599),d=e([i]);i=(d.then?(await d)():d)[0];let l=(0,o.l)(i,"default"),u=(0,o.l)(i,"config"),c=new r.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/reactions/[slug]",pathname:"/api/reactions/[slug]",bundlePath:"",filename:""},userland:i});s()}catch(e){s(e)}})},977:(e,t,a)=>{a.d(t,{Ic:()=>n,Kh:()=>r,hx:()=>s});let s=15,r=10,n=20},2327:(e,t,a)=>{a.d(t,{M:()=>getSessionId});let s=require("crypto"),getSessionId=e=>{let t=e.headers["x-forwarded-for"]||"localhost",a=(0,s.createHash)("md5").update(t+process.env.SALT_IP_ADDRESS,"utf-8").digest("hex");return a}},8599:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>handler});var r=a(3524),n=a(9926),o=a(2327),i=a(5215),d=a(977),l=e([n]);async function handler(e,t){let a=n.z.string().parse(e.query.slug),s=(0,o.M)(e);try{if("POST"===e.method){let o=n.z.nativeEnum(r.ContentType).parse(e.body.contentType),l=n.z.string().parse(e.body.contentTitle),u=n.z.nativeEnum(r.ReactionType).parse(e.body.type),c=n.z.number().parse(e.body.count||1),p=n.z.string().nullish().parse(e.body.section),h=await (0,i.Bs)(a,s),m=h[u];if(m<d.hx){let e=Math.min(Math.max(1,c),d.hx-m);await (0,i.E6)({slug:a,contentType:o,contentTitle:l,sessionId:s,type:u,count:e,section:p}),t.status(200).json({message:"Success"})}else t.status(403).json({message:"Max limit reached"})}else t.status(405).json({message:"Method Not Allowed"})}catch(e){console.log(e),t.status(500).json({message:"Internal Server Error"})}}n=(l.then?(await l)():l)[0],s()}catch(e){s(e)}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[2708,5215],()=>__webpack_exec__(3733));module.exports=a})();