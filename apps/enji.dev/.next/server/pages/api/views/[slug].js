"use strict";(()=>{var e={};e.id=4117,e.ids=[4117],e.modules={3524:e=>{e.exports=require("@prisma/client")},1635:e=>{e.exports=require("dayjs")},4195:e=>{e.exports=require("dayjs/plugin/relativeTime")},9593:e=>{e.exports=require("jsonata")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9926:e=>{e.exports=import("zod")},1369:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>u,default:()=>l,routeModule:()=>c});var r=s(3e3),i=s(4761),n=s(3273),o=s(3031),d=e([o]);o=(d.then?(await d)():d)[0];let l=(0,n.l)(o,"default"),u=(0,n.l)(o,"config"),c=new r.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/views/[slug]",pathname:"/api/views/[slug]",bundlePath:"",filename:""},userland:o});a()}catch(e){a(e)}})},977:(e,t,s)=>{s.d(t,{Ic:()=>i,Kh:()=>r,hx:()=>a});let a=15,r=10,i=20},2327:(e,t,s)=>{s.d(t,{M:()=>getSessionId});let a=require("crypto"),getSessionId=e=>{let t=e.headers["x-forwarded-for"]||"localhost",s=(0,a.createHash)("md5").update(t+process.env.SALT_IP_ADDRESS,"utf-8").digest("hex");return s}},3031:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>handler});var r=s(3524),i=s(9926),n=s(2327),o=s(5215),d=s(977),l=e([i]);async function handler(e,t){let s=i.z.string().parse(e.query.slug),a=(0,n.M)(e);try{if("POST"===e.method){let n=i.z.nativeEnum(r.ContentType).parse(e.body.contentType),l=i.z.string().parse(e.body.contentTitle),u=await (0,o.zv)(s,a);u<d.Ic?(await (0,o.kE)({slug:s,contentType:n,contentTitle:l,sessionId:a}),t.status(200).json({message:"Success"})):t.status(403).json({message:"Max limit reached"})}else t.status(405).json({message:"Method Not Allowed"})}catch(e){console.log(e),t.status(500).json({message:"Internal Server Error"})}}i=(l.then?(await l)():l)[0],a()}catch(e){a(e)}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[2708,5215],()=>__webpack_exec__(1369));module.exports=s})();