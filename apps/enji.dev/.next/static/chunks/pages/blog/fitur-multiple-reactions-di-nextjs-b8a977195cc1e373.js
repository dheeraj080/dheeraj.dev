(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[686],{9752:function(n,a,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/fitur-multiple-reactions-di-nextjs",function(){return e(4114)}])},4114:function(n,a,e){"use strict";e.r(a);var s=e(1549),i=e(5890),l=e(4963),c=e(90),t=e(2124);let MDXLayout=n=>{let{children:a}=n;return(0,s.jsx)(l.Z,{frontMatter:{title:"Fitur Multiple Reactions",description:"Bikin fitur multiple reactions \uD83D\uDC4F\uD83D\uDE32\uD83E\uDDD0 di Next.js (MongoDB, Prisma, SWR)",caption:"",date:"2023-01-15",lang:"id",tags:["features","concept"],category:"features"},tableOfContents:[{title:"Fitur",slug:"fitur",depth:1},{title:"Konsep",slug:"konsep",depth:1},{title:"Database",slug:"database",depth:2},{title:"REST API",slug:"rest-api",depth:2},{title:"Component",slug:"component",depth:2},{title:"Hasil Akhir",slug:"hasil-akhir",depth:1},{title:"Summary",slug:"summary",depth:1}],children:a})};function _createMdxContent(n){let a=Object.assign({p:"p",a:"a",strong:"strong",hr:"hr",h2:"h2",ul:"ul",li:"li",h3:"h3",pre:"pre",code:"code",span:"span",blockquote:"blockquote",ol:"ol"},(0,i.ah)(),n.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.p,{children:(0,s.jsx)(a.a,{href:"#hasil-akhir",children:"TL;DR"})}),"\n",(0,s.jsxs)(a.p,{children:["Engga nyangka bikin ini doang bisa sampe hampir tiga hari loh, tapi emang semuanya dari 0 sih. ",(0,s.jsx)(a.strong,{children:"CUMA"})," bikin fitur reactions aja, iya itu yang ngikut-ngikut di bawah \uD83D\uDE01"]}),"\n",(0,s.jsxs)(a.p,{children:["Engga bikin ",(0,s.jsx)(a.strong,{children:"analisisnya"})," dulu, gas langsung bikin database, trial & error dan refactoring. Antara gabisa sama males, tapi yang jelas pengen langsung ngoding sih \uD83D\uDE02"]}),"\n",(0,s.jsx)(a.p,{children:"Sekalian di artikel ini saya jabarin deh, fiturnya apa aja, gimana konsep bikinnya, tapi bukan tutorial step by step ya."}),"\n",(0,s.jsxs)(a.p,{children:["Siapa tau kalian ada yang mau bikin juga ya kan, jadi bisa nyontek lah sedikit-sedikit mah, tapi ambil yang ",(0,s.jsx)(a.strong,{children:"'baiknya'"})," aja we ya."]}),"\n",(0,s.jsx)(a.p,{children:"Gasss langsung lah..."}),"\n",(0,s.jsx)(a.hr,{}),"\n",(0,s.jsx)(a.h2,{children:"Fitur"}),"\n",(0,s.jsx)(a.p,{children:"Pertama saya mikirin gambaran kasarnya dulu mau dibikin kaya gimana si reactions ini teh."}),"\n",(0,s.jsx)(a.p,{children:"Dan dapetlah, kira-kira fiturnya kaya gini:"}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"Multiple Reactions"})}),"\n",(0,s.jsxs)(a.p,{children:["Ada ",(0,s.jsx)(c.Z,{children:"claps"}),", ",(0,s.jsx)(c.Z,{color:"blue",children:"wow"})," dsb. dan sebisa mungkin gampang kalau misal kedepannya mau nambahin reaction yang lain."]}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"Batch Reactions"})}),"\n",(0,s.jsxs)(a.p,{children:["Bisa ngasih beberapa kali reaction yang sejenis, misal 20x ",(0,s.jsx)(c.Z,{children:"claps"}),", 10x ",(0,s.jsx)(c.Z,{color:"blue",children:"wow"})," dsb."]}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"Section Reactions"})}),"\n",(0,s.jsxs)(a.p,{children:["Bisa tau dimana user ngasih reaction, misal ngasih 10x ",(0,s.jsx)(c.Z,{children:"claps"})," di section yang judulnya ",(0,s.jsx)(a.strong,{children:"'Fitur'"})," kaya section ini."]}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(a.hr,{}),"\n",(0,s.jsx)(a.h2,{children:"Konsep"}),"\n",(0,s.jsx)(a.p,{children:"Jadi sebenarnya yang lama tuh bikin REST API, banyak refactoring, lama bikin skema databasenya dan lain-lain yang ke arah BE nya sih."}),"\n",(0,s.jsx)(a.p,{children:"Pasti banyak yang kurang tepat, harap dimaklum ya, bukan anak BE soalnya ✌"}),"\n",(0,s.jsx)(a.h3,{children:"Database"}),"\n",(0,s.jsx)(a.p,{children:"Jujur setelah tiga tahun gitu saya baru berurusan lagi sama database. Terakhir ngurusin database teh pas bikin aplikasi ujian akhir perkuliahan."}),"\n",(0,s.jsxs)(a.p,{children:["Pertama nentuin dulu mau hosting dimana nih. Masalah SQL noSQL ngga masalah, karena masih coba-coba, jadi nyoba cari yang gratisan wkwk dan dapet hostingan ",(0,s.jsx)(a.strong,{children:"MongoDB Atlas"})," yang shared, lumayan lah."]}),"\n",(0,s.jsxs)(a.p,{children:["Karena ORM nya juga saya pake ",(0,s.jsx)(a.strong,{children:"prisma"}),", jadi kayanya ngga terlalu ribet sih kalau migrasi ke database yang lain."]}),"\n",(0,s.jsx)(a.p,{children:"Mari ke skema database. Ini fokus ke fitur reactionsnya aja ya, sebenarnya ada field buat views dan shares tapi sengaja ngga saya masukin."}),"\n",(0,s.jsxs)(a.p,{children:["Pertama, saya bikin table ",(0,s.jsx)(a.strong,{children:"ContentMeta"}),". Ini buat nyimpen data postingannya."]}),"\n",(0,s.jsx)(a.p,{children:"Gaperlu nyimpen title, date, konten dll karena emang data postingannya langsung build secara lokal dari mdx, jadi cuma nyimpen slugnya aja."}),"\n",(0,s.jsx)(a.pre,{className:"language-scheme","data-lines":"6","data-language":"scheme",children:(0,s.jsxs)(a.code,{className:"language-scheme code-highlight",children:[(0,s.jsx)(a.span,{className:"code-line",children:"model ContentMeta {\n"}),(0,s.jsx)(a.span,{className:"code-line",children:"  id          String\n"}),(0,s.jsx)(a.span,{className:"code-line",children:"\n"}),(0,s.jsx)(a.span,{className:"code-line highlight-line",children:"  slug        String\n"}),(0,s.jsx)(a.span,{className:"code-line",children:"  createdAt   DateTime\n"}),(0,s.jsx)(a.span,{className:"code-line",children:"}\n"})]})}),"\n",(0,s.jsxs)(a.p,{children:["Kemudian ini nih yang penting, table ",(0,s.jsx)(a.strong,{children:"Reaction"}),", buat nyimpen si ",(0,s.jsx)(a.strong,{children:"reactions"}),"nya."]}),"\n",(0,s.jsx)(a.pre,{className:"language-scheme","data-lines":"17","data-language":"scheme",children:(0,s.jsxs)(a.code,{className:"language-scheme code-highlight",children:[(0,s.jsx)(a.span,{className:"code-line",children:"model Reaction {\n"}),(0,s.jsx)(a.span,{className:"code-line",children:"  id          String\n"}),(0,s.jsx)(a.span,{className:"code-line",children:"\n"}),(0,s.jsx)(a.span,{className:"code-line highlight-line",children:"  type        ReactionType\n"}),(0,s.jsx)(a.span,{className:"code-line highlight-line",children:"  section     String\n"}),(0,s.jsx)(a.span,{className:"code-line highlight-line",children:"  count       Int\n"}),(0,s.jsx)(a.span,{className:"code-line highlight-line",children:"  sessionId   String\n"}),(0,s.jsx)(a.span,{className:"code-line",children:"  createdAt   DateTime\n"}),(0,s.jsx)(a.span,{className:"code-line",children:"\n"}),(0,s.jsx)(a.span,{className:"code-line",children:"  contentId   String\n"}),(0,s.jsx)(a.span,{className:"code-line",children:"}\n"}),(0,s.jsx)(a.span,{className:"code-line",children:"\n"}),(0,s.jsx)(a.span,{className:"code-line",children:"enum ReactionType {\n"}),(0,s.jsx)(a.span,{className:"code-line",children:"  CLAPPING\n"}),(0,s.jsx)(a.span,{className:"code-line",children:"  THINKING\n"}),(0,s.jsx)(a.span,{className:"code-line",children:"  AMAZED\n"}),(0,s.jsx)(a.span,{className:"code-line",children:"}\n"})]})}),"\n",(0,s.jsx)(a.p,{children:"Let's break it down slowly:"}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.code,{children:"type"})}),"\n",(0,s.jsxs)(a.p,{children:["Penting banget, karena pake multiple reaction, ",(0,s.jsx)(a.code,{children:"type"})," ini wajib pake. Tipe datanya saya pake predefined enum ",(0,s.jsx)(a.code,{children:"ReactionType"}),", jadi nanti isinya cuma bisa antara ",(0,s.jsx)(a.code,{children:"CLAPPING"}),", ",(0,s.jsx)(a.code,{children:"THINKING"}),", dan ",(0,s.jsx)(a.code,{children:"AMAZED"}),"."]}),"\n",(0,s.jsx)(a.p,{children:"Kalau mau nambahin reaction yang lain, bisa nambahin item baru ke enumnya. Opsi lain sekalian gasin aja ubah tipe datanya jadi String, jadi misal kalau mau pake reaction semua emoji juga bisa."}),"\n",(0,s.jsxs)(a.blockquote,{children:["\n",(0,s.jsx)(a.p,{children:"Kenapa ngga bikin relasi ke table baru aja?"}),"\n"]}),"\n",(0,s.jsx)(a.p,{children:"Bisa, cuma saya mikir kayanya bakal ribet ah nanti querynya, pake enum juga kayanya udah cukup, sekalian ngandelin type safetynya juga sih ✌"}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.code,{children:"section"})}),"\n",(0,s.jsx)(a.p,{children:"Cuma nyimpen judul section yang active saat user klik reaction nya. Misal pas user baca yang judulnya 'Database', maka section ini nanti isinya 'database'."}),"\n",(0,s.jsxs)(a.p,{children:["Cuma ngandelin ",(0,s.jsx)(a.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API",children:"IntersectionObserver"}),", observe semua judul section yang ada, yang terakhir '",(0,s.jsx)(a.strong,{children:"isIntersecting"}),"' itu dijadikan nilai section ini."]}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.code,{children:"count"})}),"\n",(0,s.jsxs)(a.p,{children:["Ini buat jumlah batch reactionnya. Jadi pas ngeklik reaction tuh sebenarnya ngga langsung kirim ke API, tapi delay dulu sekian milliseconds, ",(0,s.jsx)(a.a,{href:"https://www.freecodecamp.org/news/javascript-debounce-example/",children:"debounce"})," lah."]}),"\n",(0,s.jsxs)(a.p,{children:["Sederhananya gini: pas klik reaction beberapa kali dalam selang waktu singkat tuh dikumpulin dulu jumlah kliknya (misal 10 klik), beres itu langsung kirim ke API, dan jumlah kliknya simpen di ",(0,s.jsx)(a.code,{children:"count"})," ini."]}),"\n",(0,s.jsx)(a.p,{children:"Buat saya cara ini lebih make sense, ketimbang request ke API 10x dan bikin 10 row reaction dengan data yang sama. Sekalian buat hemat storage databasenya."}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.code,{children:"sessionId"})}),"\n",(0,s.jsx)(a.p,{children:"Buat nyimpen 'siapa' yang ngereaction. Bukan nama atau identitas user sih, tapi saya pake ip address user."}),"\n",(0,s.jsx)(a.p,{children:"Eits, ngga mentah simpen ip addressnya juga, karena ini kan termasuk data yang sangat sensitif ya buat user."}),"\n",(0,s.jsxs)(a.p,{children:["Saya hash tuh ip address, plus '",(0,s.jsx)(a.strong,{children:"digaremin"}),"' juga biar mantepp hehe. Jadi ngga ada yang tau tuh ip address user, termasuk saya yang bikin."]}),"\n",(0,s.jsx)(a.p,{children:"Kira-kira kodenya gini:"}),"\n",(0,s.jsx)(a.pre,{className:"language-ts","data-lines":"12","data-language":"ts",children:(0,s.jsxs)(a.code,{className:"language-ts code-highlight",children:[(0,s.jsxs)(a.span,{className:"code-line",children:[(0,s.jsx)(a.span,{className:"token keyword",children:"export"})," ",(0,s.jsx)(a.span,{className:"token keyword",children:"const"})," ",(0,s.jsx)(a.span,{className:"token function-variable function",children:"getSessionId"})," ",(0,s.jsx)(a.span,{className:"token operator",children:"="})," ",(0,s.jsx)(a.span,{className:"token punctuation",children:"("}),"req",(0,s.jsx)(a.span,{className:"token operator",children:":"})," NextApiRequest",(0,s.jsx)(a.span,{className:"token punctuation",children:")"})," ",(0,s.jsx)(a.span,{className:"token operator",children:"=>"})," ",(0,s.jsx)(a.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["  ",(0,s.jsx)(a.span,{className:"token keyword",children:"const"})," ipAddress ",(0,s.jsx)(a.span,{className:"token operator",children:"="})," req",(0,s.jsx)(a.span,{className:"token punctuation",children:"."}),"headers",(0,s.jsx)(a.span,{className:"token punctuation",children:"["}),(0,s.jsx)(a.span,{className:"token string",children:"'x-forwarded-for'"}),(0,s.jsx)(a.span,{className:"token punctuation",children:"]"})," ",(0,s.jsx)(a.span,{className:"token operator",children:"||"})," ",(0,s.jsx)(a.span,{className:"token string",children:"'localhost'"}),(0,s.jsx)(a.span,{className:"token punctuation",children:";"}),"\n"]}),(0,s.jsx)(a.span,{className:"code-line",children:"\n"}),(0,s.jsxs)(a.span,{className:"code-line",children:["  ",(0,s.jsx)(a.span,{className:"token comment",children:"// hashes the user's IP address and combines it with"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["  ",(0,s.jsx)(a.span,{className:"token comment",children:"// a salt to create a unique session ID that preserves"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["  ",(0,s.jsx)(a.span,{className:"token comment",children:"// the user's privacy by obscuring their IP address."}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["  ",(0,s.jsx)(a.span,{className:"token keyword",children:"const"})," currentSessionId ",(0,s.jsx)(a.span,{className:"token operator",children:"="})," ",(0,s.jsx)(a.span,{className:"token function",children:"createHash"}),(0,s.jsx)(a.span,{className:"token punctuation",children:"("}),(0,s.jsx)(a.span,{className:"token string",children:"'md5'"}),(0,s.jsx)(a.span,{className:"token punctuation",children:")"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["    ",(0,s.jsx)(a.span,{className:"token punctuation",children:"."}),(0,s.jsx)(a.span,{className:"token function",children:"update"}),(0,s.jsx)(a.span,{className:"token punctuation",children:"("}),"ipAddress ",(0,s.jsx)(a.span,{className:"token operator",children:"+"})," process",(0,s.jsx)(a.span,{className:"token punctuation",children:"."}),"env",(0,s.jsx)(a.span,{className:"token punctuation",children:"."}),(0,s.jsx)(a.span,{className:"token constant",children:"SALT_IP_ADDRESS"}),(0,s.jsx)(a.span,{className:"token punctuation",children:","})," ",(0,s.jsx)(a.span,{className:"token string",children:"'utf-8'"}),(0,s.jsx)(a.span,{className:"token punctuation",children:")"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["    ",(0,s.jsx)(a.span,{className:"token punctuation",children:"."}),(0,s.jsx)(a.span,{className:"token function",children:"digest"}),(0,s.jsx)(a.span,{className:"token punctuation",children:"("}),(0,s.jsx)(a.span,{className:"token string",children:"'hex'"}),(0,s.jsx)(a.span,{className:"token punctuation",children:")"}),(0,s.jsx)(a.span,{className:"token punctuation",children:";"}),"\n"]}),(0,s.jsx)(a.span,{className:"code-line",children:"\n"}),(0,s.jsxs)(a.span,{className:"code-line",children:["  ",(0,s.jsx)(a.span,{className:"token keyword",children:"return"})," currentSessionId",(0,s.jsx)(a.span,{className:"token punctuation",children:";"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:[(0,s.jsx)(a.span,{className:"token punctuation",children:"}"}),(0,s.jsx)(a.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,s.jsxs)(a.p,{children:["Atau kalau mau inspect langsung juga gasss ",(0,s.jsx)(a.a,{href:"https://github.com/enjidev/enji.dev/blob/425e3c09c906c005a7e1d9efbf21b87906ffd443/apps/enji.dev/src/helpers/server.ts",children:"kesini"}),"."]}),"\n",(0,s.jsxs)(a.blockquote,{children:["\n",(0,s.jsx)(a.p,{children:"Terus kenapa harus ada sessionId?"}),"\n"]}),"\n",(0,s.jsxs)(a.p,{children:["Ini digunain buat 'limit' atau ngebatesin jumlah reactionsnya. Saya groupBy ",(0,s.jsx)(a.code,{children:"type"})," where ",(0,s.jsx)(a.code,{children:"sessionId"}),", terus ",(0,s.jsx)(a.code,{children:"count"})," nya dikalkulasi."]}),"\n",(0,s.jsx)(a.p,{children:"Kalau hasilnya udah nyentuh max limit, berarti user gabisa ngasih reaction lagi."}),"\n",(0,s.jsx)("br",{}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(a.hr,{}),"\n",(0,s.jsx)(a.h3,{children:"REST API"}),"\n",(0,s.jsxs)(a.p,{children:["Ini sih cuma butuh satu endpoint, saya bikinnya ",(0,s.jsx)(a.code,{children:"/reactions"})," terus cuma bisa nerima method POST gitu. Nerima datanya ",(0,s.jsx)(a.code,{children:"slug"}),", ",(0,s.jsx)(a.code,{children:"type"}),", ",(0,s.jsx)(a.code,{children:"section"}),", dan ",(0,s.jsx)(a.code,{children:"count"}),"."]}),"\n",(0,s.jsxs)(a.p,{children:["Seperti yang udah dijelasin sebelumnya, semua data yang dikirim dihandle di Front-End. Kecuali yang ",(0,s.jsx)(a.code,{children:"sessionId"}),". ",(0,s.jsx)(a.code,{children:"sessionId"})," ini digenerate pas request API nya."]}),"\n",(0,s.jsxs)(a.p,{children:["Eh ada deng tambahin satu endpoint lagi, GET ",(0,s.jsx)(a.code,{children:"/content"}),". Ini nampilin detail jumlah reactions ",(0,s.jsx)(a.code,{children:"slug"})," saat ini, buat digunain di komponennya nanti."]}),"\n",(0,s.jsxs)(a.p,{children:["Dari dua table sebelumnya, bisa dapet data ini (response ",(0,s.jsx)(a.code,{children:"/content"}),"):"]}),"\n",(0,s.jsx)(a.pre,{className:"language-json","data-lines":"32","data-language":"json",children:(0,s.jsxs)(a.code,{className:"language-JSON code-highlight",children:[(0,s.jsxs)(a.span,{className:"code-line",children:[(0,s.jsx)(a.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["  ",(0,s.jsx)(a.span,{className:"token property",children:'"meta"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["    ",(0,s.jsx)(a.span,{className:"token property",children:'"reactionsDetail"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["      ",(0,s.jsx)(a.span,{className:"token property",children:'"CLAPPING"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token number",children:"65"}),(0,s.jsx)(a.span,{className:"token punctuation",children:","}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["      ",(0,s.jsx)(a.span,{className:"token property",children:'"THINKING"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token number",children:"45"}),(0,s.jsx)(a.span,{className:"token punctuation",children:","}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["      ",(0,s.jsx)(a.span,{className:"token property",children:'"AMAZED"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token number",children:"48"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["    ",(0,s.jsx)(a.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["  ",(0,s.jsx)(a.span,{className:"token punctuation",children:"}"}),(0,s.jsx)(a.span,{className:"token punctuation",children:","}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["  ",(0,s.jsx)(a.span,{className:"token property",children:'"metaUser"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["    ",(0,s.jsx)(a.span,{className:"token property",children:'"reactionsDetail"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["      ",(0,s.jsx)(a.span,{className:"token property",children:'"CLAPPING"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token number",children:"15"}),(0,s.jsx)(a.span,{className:"token punctuation",children:","}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["      ",(0,s.jsx)(a.span,{className:"token property",children:'"THINKING"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token number",children:"15"}),(0,s.jsx)(a.span,{className:"token punctuation",children:","}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["      ",(0,s.jsx)(a.span,{className:"token property",children:'"AMAZED"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token number",children:"15"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["    ",(0,s.jsx)(a.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["  ",(0,s.jsx)(a.span,{className:"token punctuation",children:"}"}),(0,s.jsx)(a.span,{className:"token punctuation",children:","}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["  ",(0,s.jsx)(a.span,{className:"token property",children:'"metaSection"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["    ",(0,s.jsx)(a.span,{className:"token property",children:'"fitur"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["      ",(0,s.jsx)(a.span,{className:"token property",children:'"reactionsDetail"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["        ",(0,s.jsx)(a.span,{className:"token property",children:'"CLAPPING"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token number",children:"0"}),(0,s.jsx)(a.span,{className:"token punctuation",children:","}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["        ",(0,s.jsx)(a.span,{className:"token property",children:'"THINKING"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token number",children:"4"}),(0,s.jsx)(a.span,{className:"token punctuation",children:","}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["        ",(0,s.jsx)(a.span,{className:"token property",children:'"AMAZED"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token number",children:"0"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["      ",(0,s.jsx)(a.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["    ",(0,s.jsx)(a.span,{className:"token punctuation",children:"}"}),(0,s.jsx)(a.span,{className:"token punctuation",children:","}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["    ",(0,s.jsx)(a.span,{className:"token property",children:'"database"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["      ",(0,s.jsx)(a.span,{className:"token property",children:'"reactionsDetail"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["        ",(0,s.jsx)(a.span,{className:"token property",children:'"CLAPPING"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token number",children:"0"}),(0,s.jsx)(a.span,{className:"token punctuation",children:","}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["        ",(0,s.jsx)(a.span,{className:"token property",children:'"THINKING"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token number",children:"0"}),(0,s.jsx)(a.span,{className:"token punctuation",children:","}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["        ",(0,s.jsx)(a.span,{className:"token property",children:'"AMAZED"'}),(0,s.jsx)(a.span,{className:"token operator",children:":"})," ",(0,s.jsx)(a.span,{className:"token number",children:"6"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["      ",(0,s.jsx)(a.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["    ",(0,s.jsx)(a.span,{className:"token punctuation",children:"}"}),(0,s.jsx)(a.span,{className:"token punctuation",children:","}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:["  ",(0,s.jsx)(a.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,s.jsxs)(a.span,{className:"code-line",children:[(0,s.jsx)(a.span,{className:"token punctuation",children:"}"}),"\n"]})]})}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.code,{children:"meta"})," itu jumlah keseluruhan reactions dari semua user, ",(0,s.jsx)(a.code,{children:"metaUser"})," jumlah reactions user saat ini, dan ",(0,s.jsx)(a.code,{children:"metaSection"})," jumlah reactions pada section tertentu."]}),"\n",(0,s.jsxs)(a.p,{children:["Mungkin ada yang ngeuh, itu ",(0,s.jsx)(a.code,{children:"metaSection"}),"nya kenapa ngga dibikin array aja?"]}),"\n",(0,s.jsx)(a.p,{children:"Jujurr.... gatau juga sih \uD83D\uDE02"}),"\n",(0,s.jsxs)(a.p,{children:["Tapi karena di FE logic component saya cuma ngambil data per section (ngga looping), saya lebih suka ngambil datanya dengan cara ",(0,s.jsx)(a.code,{children:"metaSection[section]"})," ketimbang array yang harus difilter dulu \uD83D\uDC40"]}),"\n",(0,s.jsx)(a.hr,{}),"\n",(0,s.jsx)(a.h3,{children:"Component"}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"This is the part that I enjoy the most."})}),"\n",(0,s.jsx)(a.p,{children:"Pertama, untuk ngambil data dari API, saya pake SWR. Dikutip dari situs SWR nya sendiri:"}),"\n",(0,s.jsxs)(a.blockquote,{children:["\n",(0,s.jsx)(a.p,{children:"With SWR, components will get a stream of data updates constantly and automatically. And the UI will be always fast and reactive."}),"\n"]}),"\n",(0,s.jsx)(a.p,{children:"Enak banget sih pake SWR ini, apalagi mutation datanya."}),"\n",(0,s.jsx)(a.hr,{}),"\n",(0,s.jsx)(a.p,{children:"Sekarang bikin komponen reactionsnya \uD83E\uDD73"}),"\n",(0,s.jsx)(a.p,{children:"Detail komponen:"}),"\n",(0,s.jsxs)(a.ol,{children:["\n",(0,s.jsxs)(a.li,{children:["Nampilin reaction yang mengekspresikan ",(0,s.jsx)(a.code,{children:"claps"}),", ",(0,s.jsx)(a.code,{children:"wow"}),", dan ",(0,s.jsx)(a.code,{children:"hmm"}),"."]}),"\n",(0,s.jsx)(a.li,{children:"Nampilin animasi emoji pas hover."}),"\n",(0,s.jsx)(a.li,{children:"Munculin animasi pas batch klik atau klik beberapa kali."}),"\n",(0,s.jsx)(a.li,{children:"Nambahin animasi ke reactions counternya."}),"\n",(0,s.jsx)(a.li,{children:"Ganti emoji pas udah kena limit."}),"\n"]}),"\n",(0,s.jsxs)(a.p,{children:["Untuk animasi emojinya (point 2) saya ambil ",(0,s.jsx)(a.a,{href:"https://animated-fluent-emoji.vercel.app/",children:"disini"})," ya."]}),"\n",(0,s.jsx)(a.hr,{}),"\n",(0,s.jsx)(a.p,{children:"Untuk urusan animasi masih setia pake framer motion \uD83D\uDE0D"}),"\n",(0,s.jsxs)(a.p,{children:["Pas user klik reaction, kan muncul animasi tuh, pas event ",(0,s.jsx)(a.code,{children:"onClick"})," cuma push yang nilai animasi ",(0,s.jsx)(a.code,{children:"x"})," sama ",(0,s.jsx)(a.code,{children:"y"}),"-nya random. Nilai animasi tadi dirender jadi componentnya framer motion."]}),"\n",(0,s.jsxs)(a.p,{children:["Dengan nilai ",(0,s.jsx)(a.code,{children:"x"})," dan ",(0,s.jsx)(a.code,{children:"y"})," yang random, jadi pas klik beberapa kali tuh ngga monoton animasinya ke arah situ-situ aja."]}),"\n",(0,s.jsxs)(a.p,{children:["Bingung ya? hehe maaf, coba cek ",(0,s.jsx)(a.a,{href:"https://github.com/enjidev/enji.dev/blob/425e3c09c906c005a7e1d9efbf21b87906ffd443/apps/enji.dev/src/components/EmojiReaction.tsx",children:"full kodenya"}),"."]}),"\n",(0,s.jsx)(a.hr,{}),"\n",(0,s.jsx)(a.h2,{children:"Hasil Akhir"}),"\n",(0,s.jsx)(a.p,{children:"Ini dia hasil akhirnya, coba kasih reactions, sampe limit, ada animasinya tuh \uD83D\uDE01"}),"\n",(0,s.jsx)("div",{style:{maxWidth:"360px",margin:"auto",marginTop:"32px",marginBottom:"32px"},children:(0,s.jsx)(t.Z,{withCountView:!1})}),"\n",(0,s.jsx)(a.p,{children:"Meskipun masih butuh banyak penyesuaian baik dari styles, gambar, layout ataupun performance, tapi saya senang dengan hasil akhir saat ini."}),"\n",(0,s.jsx)(a.hr,{}),"\n",(0,s.jsx)(a.h2,{children:"Summary"}),"\n",(0,s.jsx)(a.p,{children:"Meskipun pembuatan fitur ini cukup challenging terutama di BE nya, but I quite enjoy all the process. Meskipun butuh hampir tiga hari cuy \uD83D\uDE01"}),"\n",(0,s.jsx)(a.p,{children:"Rekap tech stacks / librari yang digunakan:"}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.a,{href:"https://www.mongodb.com/pricing",children:"MongoDB Atlas"})," untuk database hosting."]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.a,{href:"https://www.prisma.io/",children:"Prisma"})," untuk ORM nya."]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.a,{href:"https://swr.vercel.app/",children:"SWR"})," untuk ngambil data dari API."]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.a,{href:"https://www.framer.com/motion/",children:"Framer Motion"})," untuk animasi."]}),"\n",(0,s.jsx)(a.li,{children:(0,s.jsx)(a.a,{href:"https://animated-fluent-emoji.vercel.app/",children:"Animated Fluent Emoji"})}),"\n"]}),"\n",(0,s.jsx)(a.hr,{}),"\n",(0,s.jsxs)(a.blockquote,{children:["\n",(0,s.jsxs)(a.p,{children:["WAITTT, terus itu ",(0,s.jsx)(a.strong,{children:"section reactions"}),"? API nya kan udah nyediain ",(0,s.jsx)(a.code,{children:"metaSection"}),", dipake buat apa?"]}),"\n"]}),"\n",(0,s.jsx)(a.p,{children:"Kalau datanya udah ada aman lah ya, meskipun implementasinya emang belum. Tapi emang udah ada rencana dan kebayang mau dipake kaya gimana. Tunggu aja lah ya \uD83D\uDE01"}),"\n",(0,s.jsxs)(a.p,{children:["Tapi kayanya bakal update di ",(0,s.jsx)(a.a,{href:"https://twitter.com/enjidev",children:"Twitter"}),", ngga bakal dibikinin postingan khusus."]}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"HATUR NUHUN"})," udah baca sampe selesai. Sampai jumpa minggu depan di postingan selanjutnya \uD83D\uDC4B"]})]})}a.default=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.jsx)(MDXLayout,Object.assign({},n,{children:(0,s.jsx)(_createMdxContent,n)}))}},90:function(n,a,e){"use strict";var s=e(1549),i=e(4517);a.Z=function(n){let{color:a="accent",children:e=null}=n;return(0,s.jsx)("span",{className:(0,i.Z)("mdx-inline-highlight",["blue"===a&&"blue","violet"===a&&"violet"]),children:e})}},4963:function(n,a,e){"use strict";e.d(a,{Z:function(){return contents_layouts_Post}});var s=e(1549),i=e(4461),l=e(5271),c=e(462),t=e(511),r=e(3615),d=e(8374),o=e(4517),h=e(9466),p=e.n(h);function Chip(n){let{href:a,children:e=null}=n;return(0,s.jsx)(p(),{href:a,className:(0,o.Z)("bg-accent-600/[0.08] text-accent-600 inline-flex h-6 items-center gap-1 rounded-full px-2 text-[13px] font-medium","dark:text-accent-400 dark:dark:bg-accent-400/10 dark:font-normal"),children:e})}var Post_PostFooter=function(n){let{tags:a,category:e}=n;return(0,s.jsx)("div",{className:(0,o.Z)("mt-24 flex flex-col gap-6 text-sm text-slate-600","md:flex-row md:items-center md:justify-between","dark:text-slate-400"),children:(0,s.jsxs)("div",{className:(0,o.Z)("flex flex-wrap gap-x-1 gap-y-2"),children:["Posted on",(0,s.jsx)(p(),{href:"/blog",className:(0,o.Z)("text-accent-600 font-bold","dark:text-accent-400"),children:e}),"with tags:",(0,s.jsx)("div",{className:(0,o.Z)("flex flex-wrap gap-1"),children:a.map(n=>(0,s.jsxs)(Chip,{href:"/blog",children:["#",n]},n))})]})})},u=e(8993),Post_PostMeta=function(n){let{date:a,lang:e}=n;return(0,s.jsx)("div",{className:(0,o.Z)("content-wrapper mb-10"),children:(0,s.jsxs)("div",{className:(0,o.Z)("flex flex-wrap gap-x-6 gap-y-3 text-sm text-slate-600","dark:text-slate-400"),children:[(0,s.jsxs)("div",{className:(0,o.Z)("flex items-center gap-1.5"),children:[(0,s.jsx)(u.Qu,{className:(0,o.Z)("h-5 w-5")}),(0,s.jsx)("time",{dateTime:(0,d._3)(a),children:(0,d.p6)(a)})]}),(0,s.jsxs)("div",{className:(0,o.Z)("flex items-center gap-1.5"),children:[(0,s.jsx)(u.os,{className:(0,o.Z)("h-5 w-5")}),(0,d.Iz)(e)]})]})})},contents_layouts_Post=function(n){let{frontMatter:{title:a,description:e,caption:o,category:h,date:p,lang:u,tags:m},tableOfContents:j,children:x=null}=n,k=(0,d.cu)({category:o||h,title:a,date:p,lang:u,tags:m}),g=(0,d.Rg)({title:a,dateModified:p,datePublished:p,images:[k["1/1"],k["4/3"],k["16/9"]]});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{title:a,description:e,ogImage:k.default,structuredData:g}),(0,s.jsx)(t.Z,{}),(0,s.jsx)(r.Z,{title:a,description:e,caption:o}),(0,s.jsx)(Post_PostMeta,{date:p,lang:u}),(0,s.jsxs)(l.Z,{tableOfContents:j,children:[x,(0,s.jsx)(Post_PostFooter,{tags:m,category:h})]}),(0,s.jsx)(i.Z,{contentTitle:a,contentType:"POST"})]})}}},function(n){n.O(0,[21,321,19,774,888,179],function(){return n(n.s=9752)}),_N_E=n.O()}]);